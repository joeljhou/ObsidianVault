---
title: ç‰ˆæœ¬æ§åˆ¶å·¥å…·Git
shortTitle: 
description: 
icon: 
cover: 
author: æµæµªç å®¢
isOriginal: true
sticky: false
star: false
date: 2025-04-21
category: å·¥ç¨‹åä½œ
tags:
  - Git
---
# ç‰ˆæœ¬æ§åˆ¶å·¥å…·Gitï¼ˆREADMEï¼‰
[Gitå®˜ç½‘](https://git-scm.com/)
[Pro Gitï¼ˆä¸­æ–‡ç‰ˆï¼‰åœ¨çº¿](https://www.progit.cn/)
[å›¾è§£ Git](https://marklodato.github.io/visual-git-guide/index-zh-cn.html)
[IDEAä¸­é«˜æ•ˆä½¿ç”¨Git](https://www.jetbrains.com/help/idea/using-git-integration.html)
## æ¦‚è¿°åŠå†å²
1. **ä»€ä¹ˆæ˜¯ Gitï¼Ÿ**
	* **Git** æ˜¯ä¸€ä¸ª<u>åˆ†å¸ƒå¼</u>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºè·Ÿè¸ªæ–‡ä»¶çš„æ›´æ”¹ï¼Œç‰¹åˆ«æ˜¯æºä»£ç æ–‡ä»¶çš„æ›´æ”¹ã€‚
	* å®ƒç”± **Linus Torvalds** äº 2005 å¹´å¼€å‘ï¼Œæœ€åˆæ˜¯ä¸ºäº†æ”¯æŒ **Linux å†…æ ¸å¼€å‘**ã€‚
2. **ä»€ä¹ˆæ˜¯â€œç‰ˆæœ¬æ§åˆ¶â€ï¼Ÿ**
	* ç‰ˆæœ¬æ§åˆ¶æ˜¯ä¸€ç§ç®¡ç†å’Œè·Ÿè¸ªæ–‡ä»¶å˜æ›´çš„ç³»ç»Ÿ
	* å…è®¸å¤šä¸ªç”¨æˆ·åä½œå¼€å‘å¹¶è®°å½•æ–‡ä»¶å†å²ï¼Œä¾¿äºå›æ»šã€åˆå¹¶å’Œè§£å†³å†²çªã€‚
3. **ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆVCSï¼‰çš„å‘å±•é˜¶æ®µ**
	1. **æœ¬åœ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ (Local Version Control System)**ï¼š
		åªåœ¨æœ¬åœ°è®¡ç®—æœºä¸Šç®¡ç†æ–‡ä»¶ç‰ˆæœ¬ï¼Œé€šå¸¸é€šè¿‡ç®€å•çš„ç›®å½•æˆ–æ–‡ä»¶å‰¯æœ¬æ¥ä¿å­˜æ–‡ä»¶çš„ä¸åŒç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼š `RCS`ã€‚
	2. **é›†ä¸­åŒ–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ (Centralized Version Control System, CVCS)**ï¼š
		æ‰€æœ‰ç‰ˆæœ¬æ•°æ®å­˜å‚¨åœ¨ä¸­å¤®æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·é€šè¿‡å®¢æˆ·ç«¯è®¿é—®å’Œæäº¤æ–‡ä»¶çš„å˜æ›´ã€‚ç¼ºç‚¹æ˜¯å¦‚æœä¸­å¤®æœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ— æ³•è®¿é—®å†å²ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼š`CVS`ã€`Subversion (SVN)`ã€`Perforce`ã€‚
	3. **åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ (Distributed Version Control System, DVCS)**ï¼š
		æ¯ä¸ªç”¨æˆ·éƒ½æœ‰å®Œæ•´çš„ç‰ˆæœ¬å†å²åº“ï¼Œå…è®¸è„±æœºå·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥å°†æœ¬åœ°ä¿®æ”¹æ¨é€åˆ°ä¸­å¤®ä»“åº“æˆ–å…¶ä»–ç”¨æˆ·çš„ä»“åº“ã€‚å¸¸è§çš„æœ‰`Git`ã€`Mercurial`ã€‚
4. **Git å‘å±•ç®€å²**
	1. **1991-2002å¹´**ï¼šLinux å†…æ ¸å¼€å‘å›¢é˜ŸèŠ±è´¹å¤§é‡æ—¶é—´åœ¨æäº¤è¡¥ä¸å’Œä¿å­˜å½’æ¡£ä¸Šï¼Œç®¡ç†å·¥ä½œç¹çã€‚
	2. **2002å¹´**ï¼šLinux å†…æ ¸å›¢é˜Ÿä½¿ç”¨ **BitKeeper** ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä½†å› å•†ä¸šåˆä½œç»“æŸï¼Œå¤±å»å…è´¹ä½¿ç”¨ BitKeeper çš„æƒé™ã€‚
	3. **2005å¹´**ï¼šLinus Torvalds ä¸æ»¡æ„ BitKeeperï¼Œå†³å®šå¼€å‘ **Git**ï¼Œå¹¶è®¾å®šäº†é«˜æ•ˆã€åˆ†å¸ƒå¼ã€æ”¯æŒéçº¿æ€§å¼€å‘ç­‰ç›®æ ‡ã€‚
	4. **2005å¹´4æœˆ**ï¼šLinus å‘å¸ƒäº† Git çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œåˆæ­¥å®ç°äº†åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶çš„åŠŸèƒ½ã€‚
	5.  **2005å¹´åæœŸ**ï¼šGit é€æ­¥è¢«ä¼˜åŒ–ï¼ŒåŠ å…¥äº†æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¦‚åˆ†æ”¯ç®¡ç†ã€åˆå¹¶ã€æ ‡ç­¾ã€å†å²æŸ¥è¯¢ç­‰ã€‚
	6. **2008å¹´**ï¼šGit è¢« **GitHub** æ‰€æ¨å¹¿ï¼Œæˆä¸ºå¼€æºé¡¹ç›®çš„é¦–é€‰ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæå¤§åœ°æ¨åŠ¨äº†å…¶æ™®åŠã€‚
	7. **2010å¹´å**ï¼šGit æˆä¸ºå…¨çƒå¼€å‘è€…çš„ä¸»æµå·¥å…·ï¼Œå¹¿æ³›åº”ç”¨äºå¼€æºé¡¹ç›®å’Œä¼ä¸šå¼€å‘ã€‚
5. **Git æ ¸å¿ƒç†å¿µ**
	1. **ç›´æ¥è®°å½•å¿«ç…§ï¼Œè€Œéå·®å¼‚æ¯”è¾ƒ**ï¼š
		* Git é€šè¿‡ä¿å­˜æ–‡ä»¶çš„å®Œæ•´å¿«ç…§æ¥è®°å½•ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ä¿å­˜æ–‡ä»¶é—´çš„å·®å¼‚ã€‚
		* Git å¯¹å¾…æ•°æ®æ›´åƒæ˜¯ä¸€ä¸ª**å¿«ç…§æµ**ã€‚
	2. **è¿‘ä¹æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ¬åœ°æ‰§è¡Œ**ï¼š
		* Git åœ¨æœ¬åœ°æ‰§è¡Œå‡ ä¹æ‰€æœ‰æ“ä½œï¼Œä¸éœ€è¦è¿æ¥åˆ°è¿œç¨‹ä»“åº“ã€‚
		* èµ‹äºˆäº†ç¦»çº¿å·¥ä½œçš„èƒ½åŠ›ã€‚
	3. **Git ä¿è¯å®Œæ•´æ€§**ï¼š
		* Git ä½¿ç”¨ SHA-1 å“ˆå¸Œç®—æ³•ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ï¼Œä¿è¯æ¯ä¸ªç‰ˆæœ¬çš„å”¯ä¸€æ€§ã€‚
	4. **Git ä¸€èˆ¬åªæ·»åŠ æ•°æ®**ï¼š
		* Git åœ¨æ¯æ¬¡æäº¤æ—¶é€šå¸¸åªå¢åŠ æ–°çš„æ•°æ®ï¼Œè€Œä¸è¦†ç›–å·²æœ‰æ•°æ®ï¼Œç¡®ä¿æ•°æ®å†å²çš„è¿ç»­æ€§ã€‚
6. **Git çš„ä¸‰ç§æ–‡ä»¶çŠ¶æ€ ä¸ ä¸‰ä¸ªå·¥ä½œåŒºåŸŸ****ï¼š
	*  æ–‡ä»¶æœ‰ä¸‰ç§çŠ¶æ€ï¼š**å·²æäº¤ï¼ˆcommittedï¼‰**ã€**å·²ä¿®æ”¹ï¼ˆmodifiedï¼‰**ã€**å·²æš‚å­˜ï¼ˆstagedï¼‰**ã€‚
	* ç”±ä¸‰ç§çŠ¶æ€å¼•å…¥äº† Git é¡¹ç›®çš„**ä¸‰ä¸ªå·¥ä½œåŒºåŸŸ**ï¼š
		* **Git ä»“åº“ï¼ˆRepositoryï¼‰**ï¼š
			* å­˜å‚¨æäº¤çš„ç‰ˆæœ¬å’Œå†å²è®°å½•ï¼Œé€šå¸¸ä½äº `.git` ç›®å½•ä¸­ã€‚
			* æ–‡ä»¶åœ¨æäº¤ï¼ˆ`git commit`ï¼‰æ—¶ä»æš‚å­˜åŒºè½¬ç§»åˆ°ä»“åº“ï¼Œæˆä¸ºé¡¹ç›®å†å²çš„ä¸€éƒ¨åˆ†ã€‚
		* **å·¥ä½œç›®å½•ï¼ˆWorking Directoryï¼‰**ï¼š
			* ä½ å®é™…æ“ä½œçš„æ–‡ä»¶ç›®å½•ï¼ŒåŒ…å«å½“å‰çš„æ–‡ä»¶çŠ¶æ€ï¼Œå¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚
			* æ–‡ä»¶çš„å˜åŒ–ä¼šä½¿å¾—æ–‡ä»¶å¤„äº **å·²ä¿®æ”¹ï¼ˆModifiedï¼‰** çŠ¶æ€ã€‚
		* **æš‚å­˜åŒºåŸŸï¼ˆStaging Area æˆ– Indexï¼‰**ï¼š
			* æš‚å­˜åŒºåŸŸæ˜¯ä¸€ä¸ªä¸´æ—¶åŒºåŸŸï¼Œä¿å­˜å°†è¦æäº¤åˆ° Git ä»“åº“çš„æ–‡ä»¶ä¿®æ”¹ã€‚
			* ä½¿ç”¨ `git add` å‘½ä»¤å°†æ–‡ä»¶çš„ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºåŸŸã€‚
			* åœ¨æ‰§è¡Œ `git commit` å‘½ä»¤åï¼Œæš‚å­˜åŒºåŸŸçš„å†…å®¹ä¼šè¢«æäº¤åˆ° Git ä»“åº“ã€‚
##  Git å®‰è£…
###  Windows å®‰è£…
**å®˜ç½‘ç‰ˆæœ¬å®‰è£…**
* è®¿é—® [Git å®˜ç½‘ä¸‹è½½é¡µé¢](https://git-scm.com/downloads/win)ï¼Œé€‰æ‹©ä½ æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œé€šå¸¸æ˜¯ `64-bit Git for Windows Setup`ã€‚
**Git for Windows**
* ä¹Ÿå«åš`msysGit`ï¼Œå’Œ Git æ˜¯åˆ†åˆ«ç‹¬ç«‹çš„é¡¹ç›®ï¼›
* æ›´å¤šä¿¡æ¯è¯·è®¿é—® https://gitforwindows.org/ ã€‚
**GitHub Desktop**
* é€šè¿‡å®‰è£…GitHub Desktopç¨‹åºï¼Œè½»æ¾ä½“éªŒ Gitã€‚
* å®˜ç½‘å·ç§°ç»ˆæGUI Gitå®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ–å¹¶å¢å¼ºä½ çš„æœ¬åœ°ä»£ç ç®¡ç†æµç¨‹ã€‚
* ç½‘å€ä¸º https://github.com/apps/desktop ï¼Œæ”¯æŒMacç‰ˆã€‚
### Linux å®‰è£…
**Debian/Ubuntu**
```shell
sudo apt-get install git
```
**Fedora**
```shell
sudo yum install git
```
è¦äº†è§£æ›´å¤šé€‰æ‹©ï¼ŒGit å®˜æ–¹ç½‘ç«™ä¸Šæœ‰åœ¨å„ç§ Unix é£æ ¼çš„ç³»ç»Ÿä¸Šå®‰è£…æ­¥éª¤ï¼Œç½‘å€ä¸º http://gitscm.com/download/linuxã€‚
### Mac å®‰è£…
**Homebrew**
* Gitå®˜ç½‘MacOSæ¨èä½¿ç”¨Homebrewå®‰è£…
```shell
brew install git
```
**Xcode Command Line Tools**
* å¦‚æœä½ çš„ç³»ç»Ÿæ²¡æœ‰å®‰è£…è¿‡ **Xcode Command Line Tools**ï¼Œåœ¨å®‰è£… **Homebrew** è¿‡ç¨‹ä¸­ï¼Œä¼šè‡ªåŠ¨æç¤ºä½ å®‰è£… Xcode Command Line Toolsã€‚
* è¿™ä¸ªå·¥å…·åŒ…åŒ…å«äº†è®¸å¤šå¼€å‘è€…å·¥å…·ï¼Œ**Git** æ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚
* è¦äº†è§£æ›´å¤šå®‰è£…é€‰é¡¹ï¼Œè¯·è®¿é—® [Git å®˜ç½‘ Mac å®‰è£…é¡µé¢](https://git-scm.com/downloads/mac)ã€‚
## Git é…ç½®
Git é…ç½®æœ‰ä¸‰ä¸ªå±‚çº§ï¼Œä¼˜å…ˆçº§**ä»ä½åˆ°é«˜**ä¾æ¬¡ä¸ºï¼š

| é…ç½®å±‚çº§ | é…ç½®æ–‡ä»¶è·¯å¾„                                  | ä½œç”¨èŒƒå›´         | é…ç½®å‘½ä»¤                  |
| ---- | --------------------------------------- | ------------ | --------------------- |
| ç³»ç»Ÿçº§  | `/etc/gitconfig`                        | ç³»ç»Ÿä¸Šæ‰€æœ‰ç”¨æˆ·å’Œæ‰€æœ‰ä»“åº“ | `git config --system` |
| ç”¨æˆ·çº§  | `~/.gitconfig` æˆ– `~/.config/git/config` | å½“å‰ç”¨æˆ·æ‰€æœ‰ä»“åº“     | `git config --global` |
| ä»“åº“çº§  | `.git/config`                           | å½“å‰ä»“åº“         | `git config --local`  |
1. **é…ç½®ç”¨æˆ·ä¿¡æ¯ï¼ˆå¿…åšï¼‰**
	* å®‰è£…å®Œ Git åï¼Œç¬¬ä¸€æ­¥æ˜¯é…ç½®ä½ çš„**ç”¨æˆ·åç§°**ä¸**é‚®ä»¶åœ°å€**ã€‚
	* `--global` è¡¨ç¤º**ç”¨æˆ·çº§**çš„å…¨å±€é…ç½®ï¼Œä»…éœ€æ‰§è¡Œä¸€æ¬¡ï¼›
	```shell
	git config --global user.name "ç”¨æˆ·å"
	git config --global user.email "é‚®ç®±"
	``` 
2. **é…ç½®æ–‡æœ¬ç¼–è¾‘å™¨**
	```shell
	# å°† `emacs` è®¾ç½®ä¸º Git çš„é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨
	git config --global core.editor emacs
	# å°† `VS Code` è®¾ç½®ä¸º Git çš„é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆæ¨èï¼‰
	git config --global core.editor "code --wait"
	# å°† `Sublime Text` è®¾ç½®ä¸º Git çš„é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨
	git config --global core.editor "subl -n -w"
	```
3. **æ£€æŸ¥å½“å‰Gité…ç½®ä¿¡æ¯**
	* `git config --list` å‘½ä»¤ä¼šåˆ—å‡ºå½“å‰ Git é…ç½®çš„æ‰€æœ‰é¡¹ï¼ŒåŒ…æ‹¬å…¨å±€å’Œæœ¬åœ°é…ç½®ã€‚
	```shell
	$ git config --list
	credential.helper=osxkeychain     # ä½¿ç”¨ macOS Keychain ç®¡ç† Git å‡­è¯
	init.defaultbranch=main           # åˆå§‹åŒ– Git ä»“åº“æ—¶ï¼Œé»˜è®¤ä¸»åˆ†æ”¯ä¸º 'main'
	user.name=joeljhou                # Git æäº¤æ—¶ä½¿ç”¨çš„ç”¨æˆ·å
	user.email=joeljhou336@gmail.com  # Git æäº¤æ—¶ä½¿ç”¨çš„é‚®ç®±åœ°å€
	core.ignorecase=false             # æ–‡ä»¶ååŒºåˆ†å¤§å°å†™ï¼Œé»˜è®¤å€¼ false
	```
4. **è·å– Git å‘½ä»¤å¸®åŠ©**
	* Git æä¾›ä¸‰ç§æ–¹å¼æŸ¥çœ‹å‘½ä»¤å¸®åŠ©ï¼š
	```shell
	# ä»¥ commit å‘½ä»¤ä¸ºä¾‹
	$ git help commit
	$ git commit --help
	$ man git-commit
	```
## Git åŸºç¡€
### `git config`:  é…ç½®
ç”¨äºè®¾ç½® Git çš„é…ç½®å˜é‡ï¼Œå¦‚ç”¨æˆ·åã€é‚®ç®±ã€ç¼–è¾‘å™¨ç­‰
```shell
git config --global user.name "ç”¨æˆ·å"
git config --global user.email "é‚®ç®±"
```
### `git help`: å¸®åŠ©æ–‡æ¡£
ç”¨äºæ˜¾ç¤º Git å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£
```shell
git help <subcommand>
```
> æ¨èä½¿ç”¨ `tldr` æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£
### `git init`ï¼šåˆå§‹åŒ–ä»“åº“
ç”¨äºåœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Git ä»“åº“
```shell
$ git init
```
### `git clone`ï¼šå…‹éš†è¿œç¨‹ä»“åº“
ç”¨äºä»è¿œç¨‹ä»“åº“åˆ›å»ºä¸€ä¸ª Git ä»“åº“çš„æ‹·è´
```shell
git clone <repository-url>
```
### `git add`ï¼šè·Ÿè¸ªæ–‡ä»¶
ç”¨äºå°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œå‡†å¤‡è¿›è¡Œæäº¤
```shell
# æ·»åŠ æ–‡ä»¶/å¤¹ï¼Œå¤šä¸ªä½¿ç”¨â€œç©ºæ ¼â€éš”å¼€
git add <file>...
# æ·»åŠ æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬æ–°å»ºã€ä¿®æ”¹ã€åˆ é™¤ï¼‰
git add .
```
æ³¨æ„ï¼šè¿è¡Œäº†`git add`ä¹‹ååˆä½œäº†ä¿®è®¢çš„æ–‡ä»¶ï¼Œéœ€è¦é‡æ–°è¿è¡Œ`git add` æŠŠæœ€æ–°ç‰ˆæœ¬é‡æ–°æš‚å­˜èµ·æ¥ã€‚
### `.gitignore`ï¼šå¿½ç•¥æ–‡ä»¶
 æ ¼å¼è§„èŒƒå¦‚ä¸‹ï¼š
1. **ç©ºè¡Œå’Œä»¥ `#` å¼€å¤´çš„è¡Œ**ï¼šè¡¨ç¤ºæ³¨é‡Šï¼Œä¼šè¢« Git å¿½ç•¥ã€‚
2. **ä½¿ç”¨ glob æ¨¡å¼åŒ¹é…æ–‡ä»¶è·¯å¾„**ï¼Œç±»ä¼¼ç®€åŒ–ç‰ˆçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š
	* `*`ï¼šåŒ¹é…ä»»æ„æ•°é‡çš„ä»»æ„å­—ç¬¦
	*  `?`ï¼šåŒ¹é…å•ä¸ªä»»æ„å­—ç¬¦
	* `[abc]`ï¼šåŒ¹é…æ–¹æ‹¬å·ä¸­åˆ—å‡ºçš„ä»»æ„ä¸€ä¸ªå­—ç¬¦
	* `[0-9]`ï¼šåŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼ˆ0~9ï¼‰
	*  `**`ï¼šåŒ¹é…ä»»æ„ä¸­é—´è·¯å¾„ï¼Œæ¯”å¦‚ `a/**/z` å¯åŒ¹é… `a/z`ã€`a/b/z`ã€`a/b/c/z` ç­‰
3. **ç‰¹æ®Šå‰ç¼€ç¬¦å·è¯´æ˜**
	*  `/` å¼€å¤´ï¼šè¡¨ç¤ºä»ä»“åº“æ ¹ç›®å½•å¼€å§‹åŒ¹é…
	* `/` ç»“å°¾ï¼šè¡¨ç¤ºåŒ¹é…ç›®å½•
	* `!` å¼€å¤´ï¼šè¡¨ç¤ºâ€œå–åâ€ï¼Œå³è¦å¿½ç•¥æŒ‡å®šæ¨¡å¼ä»¥å¤–çš„æ–‡ä»¶æˆ–ç›®å½•
å®é™…ç¤ºä¾‹ï¼š
```shell
# å¿½ç•¥æ‰€æœ‰ .a æ–‡ä»¶
*.a
# ä½†è¦ä¿ç•™ lib.aï¼ˆå³ä½¿ä¸Šé¢å¿½ç•¥äº† .a æ–‡ä»¶ï¼‰
!lib.a
# åªå¿½ç•¥ä»“åº“æ ¹ç›®å½•ä¸‹çš„ TODO æ–‡ä»¶
/TODO
# å¿½ç•¥ build/ ç›®å½•åŠå…¶ä¸­æ‰€æœ‰å†…å®¹
build/
# å¿½ç•¥ doc ç›®å½•ä¸‹çš„ notes.txt æ–‡ä»¶ï¼Œä½†ä¸å¿½ç•¥å…¶ä»–å­ç›®å½•ä¸‹çš„ txt æ–‡ä»¶
doc/*.txt
# å¿½ç•¥ doc ç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•ä¸­çš„ pdf æ–‡ä»¶
doc/**/*.pdf
```
### `git diff`ï¼šæ¯”è¾ƒå·®å¼‚ï¼ˆå·¥å…·ï¼‰
æ¯”è¾ƒ Git å„ä¸ªåŒºåŸŸï¼ˆå·¥ä½œåŒºã€æš‚å­˜åŒºã€æäº¤è®°å½•ï¼‰ç­‰ä¹‹é—´çš„å·®å¼‚ã€‚

| æ¯”è¾ƒå¯¹è±¡            | å‘½ä»¤                             | ç”¨é€”è¯´æ˜                 |
| --------------- | ------------------------------ | -------------------- |
| å·¥ä½œåŒº vs æš‚å­˜åŒº      | `git diff`                     | æŸ¥çœ‹æœªæš‚å­˜çš„ä¿®æ”¹ï¼ˆæœ€å¸¸ç”¨ï¼‰        |
| å·¥ä½œåŒº+æš‚å­˜åŒº vs HEAD | `git diff HEAD`                | æŸ¥çœ‹æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼ˆå«å·²æš‚å­˜å’Œæœªæš‚å­˜ï¼‰ |
| æš‚å­˜åŒº vs æœ€æ–°æäº¤     | `git diff --staged`            | æŸ¥çœ‹å·²æš‚å­˜ä½†æœªæäº¤çš„ä¿®æ”¹         |
| ç»Ÿè®¡å˜æ›´ä¿¡æ¯          | `git diff --stat`              | åªçœ‹å˜æ›´æ•°é‡ï¼Œä¸çœ‹å…·ä½“å†…å®¹        |
| æ€»ç»“ç»“æ„å˜åŒ–          | `git diff --summary`           | çœ‹é‡å‘½åã€æ–°å»ºã€åˆ é™¤ã€æƒé™ç­‰       |
| ä»»æ„æ—¶é—´ç‚¹ vs HEAD   | `git diff 'HEAD@{n days ago}'` | æŸ¥çœ‹è¿‡å»çš„å˜æ›´ï¼ˆä½¿ç”¨é¢‘ç‡ä¸­ç­‰ï¼‰      |
| æ¯”è¾ƒä¸¤ä¸ªåˆ†æ”¯é—´æ–‡ä»¶       | `git diff åˆ†æ”¯1..åˆ†æ”¯2 -- è·¯å¾„/æ–‡ä»¶`   | æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬ä¸­åŒä¸€æ–‡ä»¶çš„å·®å¼‚       |
| æ¯”è¾ƒè·¨åˆ†æ”¯çš„ä¸¤ä¸ªæ–‡ä»¶      | `git diff åˆ†æ”¯:è·¯å¾„/æ–‡ä»¶ è·¯å¾„/æœ¬åœ°æ–‡ä»¶`    | å¯¹æ¯”ä»»æ„ä¸¤ä¸ªæ–‡ä»¶             |
å›¾å½¢å·¥å…·æ¯”è¾ƒå·®å¼‚ï¼š`git difftool`
```shell
# ä½¿ç”¨ vscode ä½œä¸º git difftool
git config --global diff.tool vscode
git config --global difftool.vscode.cmd "code --wait --diff $LOCAL $REMOTE"
```
### `git commit`ï¼šæäº¤æ›´æ–°
```shell
# æäº¤å½“å‰å·²æš‚å­˜ï¼ˆstagedï¼‰çš„ä¿®æ”¹ã€‚
git commit -m "æäº¤æš‚å­˜åŒº"
# å°†è·Ÿè¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼Œæ·»åŠ åˆ°æš‚å­˜åŒºå¹¶æäº¤
git commit -a -m "è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸ"
# å°†å½“å‰æš‚å­˜çš„æ›´æ”¹è¿½åŠ åˆ°æœ€è¿‘ä¸€æ¬¡æäº¤ï¼Œå¹¶æ›´æ–°å…¶å“ˆå¸Œå€¼
git commit --amend -m "è¿½åŠ æäº¤"
```
### `git rm`ï¼šç§»é™¤æ–‡ä»¶
```shell
# åˆ é™¤æ–‡ä»¶
$ rm <file>
# åˆ é™¤æ–‡ä»¶ï¼Œå¹¶æ ‡è®°ä¸ºå¾…æäº¤åˆ é™¤
$ git rm <file>
# é€’å½’åˆ é™¤æ–‡ä»¶
$ git rm -r	<file>
# ä»…å–æ¶ˆè¿½è¸ªï¼Œæ–‡ä»¶ä¿ç•™åœ¨æœ¬åœ°
$ git rm --cached <file>
```
**æ”¯æŒ Glob æ¨¡å¼**ï¼šå…è®¸ä½¿ç”¨é€šé…ç¬¦æ¥åŒ¹é…æ–‡ä»¶ã€‚
```shell
# é€’å½’åˆ é™¤æ•´ä¸ªç›®å½•åŠå…¶å­ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚æ…ç”¨ï¼
git rm -r *
# åˆ é™¤ `log/` ç›®å½•ä¸‹çš„ `.log` æ–‡ä»¶
# å¦‚æœæ²¡æœ‰åæ–œæ ï¼ŒShell ä¼šå…ˆå°† `*.log` å±•å¼€æˆå®é™…çš„æ–‡ä»¶åˆ—è¡¨
git rm log/\*.log
# åˆ é™¤æ‰€æœ‰ä»¥ `~` ç»“å°¾çš„æ–‡ä»¶
# åæ–œæ ä½œç”¨ï¼Œé¿å…Shell å°† `*~` å±•å¼€æˆæ‰€æœ‰ç¬¦åˆè¯¥æ¨¡å¼çš„æ–‡ä»¶ï¼Œå†ä¼ é€’ç»™ `git rm`ã€‚
git rm \*~
# é€’å½’åˆ é™¤ `docs` ç›®å½•ä¸‹çš„ `.md` æ–‡ä»¶
git rm -r 'docs/*.md'
```
### `git mv`ï¼šç§»åŠ¨æ–‡ä»¶
å¦‚æœåœ¨ Git ä¸­é‡å‘½åäº†æŸä¸ªæ–‡ä»¶ï¼Œä»“åº“ä¸­å­˜å‚¨çš„å…ƒæ•°æ®å¹¶ä¸ä¼šä½“ç°å‡ºè¿™æ˜¯ä¸€æ¬¡æ”¹åæ“ä½œã€‚ä¸è¿‡ Git éå¸¸èªæ˜ï¼Œå®ƒä¼šæ¨æ–­å‡ºç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆã€‚
```shell
$ git mv README.md README
$ git status             
On branch main
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	renamed:    README.md -> README
```
ç›¸å½“äºè¿è¡Œäº†ä¸‹é¢ä¸‰æ¡å‘½ä»¤ï¼š
```shell
mv README.md README
git rm README.md
git add README
```
### `git status`ï¼šæ–‡ä»¶çŠ¶æ€
Git å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶çŠ¶æ€ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š
1. **å·²è·Ÿè¸ªæ–‡ä»¶**ï¼šå³è¢«ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶
	* å·¥ä½œä¸€æ®µæ—¶é—´åï¼Œè¿™äº›æ–‡ä»¶å¯èƒ½ä¼šå¤„äºä»¥ä¸‹å‡ ç§çŠ¶æ€ï¼š
		* **æœªä¿®æ”¹**ï¼ˆ`Unmodified`ï¼‰ï¼šæ–‡ä»¶å†…å®¹è‡ªä¸Šæ¬¡æäº¤ä»¥æ¥æ²¡æœ‰å˜åŒ–ï¼Œä¿ç•™åœ¨å½“å‰ç‰ˆæœ¬ä¸­ã€‚
		* **å·²ä¿®æ”¹**ï¼ˆ`Modified`ï¼‰ï¼šæ–‡ä»¶çš„å†…å®¹æœ‰å˜åŒ–ï¼Œä½†è¿™äº›ä¿®æ”¹è¿˜æœªè¢«åŠ å…¥æš‚å­˜åŒºã€‚
		* **å·²æš‚å­˜**ï¼ˆ`Staged`ï¼‰ï¼šæ–‡ä»¶ä¿®æ”¹åå·²ç»è¢«æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œå‡†å¤‡æäº¤è¿™äº›å˜åŠ¨ã€‚
2. **æœªè·Ÿè¸ªæ–‡ä»¶**ï¼ˆ`Untracked`ï¼‰ï¼šæœªè¢«ç‰ˆæœ¬æ§åˆ¶ï¼Œæˆ–å¿½ç•¥çš„æ–‡ä»¶
	* ğŸ‰‘é€šè¿‡`git add <filename>`å°†æœªè·Ÿè¸ªæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œçº³å…¥ç‰ˆæœ¬æ§åˆ¶ã€‚
æ–‡ä»¶çš„çŠ¶æ€å˜åŒ–å‘¨æœŸç¤ºæ„å›¾ï¼š
![æ–‡ä»¶çš„çŠ¶æ€å˜åŒ–å‘¨æœŸ](http://img.geekyspace.cn/pictures/2025/20250502004429356.png)

âœ… **`git status`ï¼ˆé»˜è®¤è¯¦å°½è¾“å‡ºï¼‰**
ç”¨äºæŸ¥çœ‹å·¥ä½œç›®å½•å’Œæš‚å­˜åŒºçš„æ–‡ä»¶çŠ¶æ€ï¼š
1. **âœ”ï¸å¹²å‡€çš„å·¥ä½œç›®å½•ï¼š`nothing to commit, working tree clean`**
	* æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ï¼Œå·¥ä½œåŒºå’Œæš‚å­˜åŒºä¸€è‡´
2. **ğŸ“¦å·²æš‚å­˜çš„æ›´æ”¹ï¼š`Changes to be committed`**
	* `new file:` æ–°å¢æ–‡ä»¶å¹¶å·²æš‚å­˜
	* `modified:` æ–‡ä»¶å†…å®¹æœ‰ä¿®æ”¹å¹¶å·²æš‚å­˜
	* `deleted:` æ–‡ä»¶å·²è¢«åˆ é™¤å¹¶æš‚å­˜
3. **ğŸ“æœ‰æ–‡ä»¶è¢«ä¿®æ”¹ä½†æœªæš‚å­˜ï¼š`Changes not staged for commit`**
	- `modified:` æ–‡ä»¶è¢«ä¿®æ”¹ä½†æœªæš‚å­˜
	* `deleted:` æ–‡ä»¶è¢«åˆ é™¤ä½†æœªæš‚å­˜
4. **ğŸ†•æœªè¿½è¸ªæ–‡ä»¶ï¼š`Untracked files`**
	* æ–‡ä»¶æ˜¯æ–°æ·»åŠ çš„ï¼Œä½† Git å°šæœªè·Ÿè¸ªï¼ˆæœªä½¿ç”¨ `git add`ï¼‰
âœ… **çŠ¶æ€ç®€è§ˆï¼ˆ-sï¼‰**
`git status -s`ï¼ˆæˆ– `--short`ï¼‰æä¾›æ›´**ç´§å‡‘**çš„çŠ¶æ€æ‘˜è¦ï¼Œé€‚åˆå¿«é€ŸæŸ¥çœ‹å½“å‰å˜æ›´ã€‚
**ç¤ºä¾‹ï¼š**
```shell
$ git status -s
 M README
MM Rakefile
A  lib/git.rb
M  lib/simplegit.rb
?? LICENSE.txt
```
**é€Ÿè®°ï¼š**
* å·¦è¾¹ä»£è¡¨å·²æš‚å­˜ï¼Œå³è¾¹ä»£è¡¨å·²ä¿®æ”¹ï¼›
*  `M`æ˜¯ä¿®æ”¹ï¼Œ`A`æ˜¯æ·»åŠ ï¼Œ`??`æ˜¯æœªè¿½è¸ªã€‚
### `git log`ï¼šæŸ¥çœ‹æäº¤å†å²     
```shell
$ git log
commit ğŸ”SHA-1 (HEAD -> master)
Author: ğŸ§‘â€ğŸ’»ä½œè€… <ğŸ“®é‚®ç®±>
Date:   2025-05-20 00:00:00 +0800

    âœ¨ æäº¤è¯´æ˜ï¼ˆå¦‚ï¼šä¼˜åŒ–é¦–é¡µåŠ è½½é€Ÿåº¦ï¼‰
```
#### å¸¸ç”¨é€‰é¡¹
![[Pro Git ä¸­æ–‡ç‰ˆ ç¬¬2ç‰ˆ 2.1.1.pdf#page=41&rect=46,253,567,486|Pro Git ä¸­æ–‡ç‰ˆ ç¬¬2ç‰ˆ 2.1.1, p.31]]
âœ… **`-p`ï¼šæ˜¾ç¤ºæ¯æ¬¡æäº¤çš„å·®å¼‚ï¼ˆdiffï¼‰**
```shell
$ git log -p

commit a1b2c3d4
Author: Alice <alice@gmail.com>
Date:   Fri May 9 17:22:17 2025 +0800

    ä¿®æ”¹æ¬¢è¿è¯­

diff --git a/main.js b/main.js
--- a/main.js
+++ b/main.js
@@ -1,4 +1,4 @@
-console.log("Hello, world!");
+console.log("Welcome to my site!");
```
âœ… **`--stat`ï¼šæ˜¾ç¤ºæ¯æ¬¡æäº¤æ¶‰åŠçš„æ–‡ä»¶åŠç»Ÿè®¡ä¿¡æ¯**
```shell
$ git log --stat

commit a1b2c3d4
Author: Alice <alice@example.com>
Date:   Fri May 9 17:22:17 2025 +0800

    ä¿®æ”¹æ¬¢è¿è¯­

 main.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
```
âœ… **`--shortstat`ï¼šä»…æ˜¾ç¤ºä¿®æ”¹ç»Ÿè®¡æ±‡æ€»**
```shell
$ git log --shortstat

commit a1b2c3d4
Author: Alice <alice@example.com>
Date:   Fri May 9 17:22:17 2025 +0800

    ä¿®æ”¹æ¬¢è¿è¯­

 1 file changed, 1 insertion(+), 1 deletion(-)
```
âœ… **`--name-only`ï¼šä»…æ˜¾ç¤ºå—å½±å“æ–‡ä»¶**
```shell
$ git log --name-only

Acommit a1b2c3d4
Author: Alice <alice@example.com>
Date:   Fri May 9 17:22:17 2025 +0800

    ä¿®æ”¹æ¬¢è¿è¯­

main.js
```
âœ… **`--abbrev-commit`ï¼šä½¿ç”¨ç®€çŸ­æäº¤ ID**
```shell
$ git log --abbrev-commit

commit a1b2c3d
Author: Alice <alice@example.com>
Date:   Fri May 9 17:22:17 2025 +0800

    ä¿®æ”¹æ¬¢è¿è¯­
```
âœ… **`--relative-date`ï¼šä»¥ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºæ—¥æœŸ**
```shell
$ git log --relative-date

commit a1b2c3d4
Author: Alice <alice@example.com>
Date:   2 hours ago

    ä¿®æ”¹æ¬¢è¿è¯­
```
âœ… **`--graph`ï¼šå›¾å½¢åŒ–æŸ¥çœ‹åˆ†æ”¯å†å²**
* å¯ä»¥ä¸`oneline`æˆ–`format`ç»“åˆä½¿ç”¨
```shell
$ git log --graph --oneline

* a1b2c3d4 ä¿®æ”¹æ¬¢è¿è¯­
* | f1e2d3c4 ä¿®å¤æŒ‰é’®æ ·å¼
| * 2b3c4d5e æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
|/
* 3a4b5c6d åˆå§‹åŒ–é¡¹ç›®
```
âœ… **`--decorate`ï¼šæ˜¾ç¤ºåˆ†æ”¯åå’Œæ ‡ç­¾**
```shell
$ git log --oneline --decorate --graph --all
```
âœ… **`--pretty`ï¼šè‡ªå®šä¹‰æ ¼å¼è¾“å‡º**
```shell
$ git log --pretty=oneline
$ git log --pretty=format:"%h - %an, %ad : %s" --date=local

* a1b2c3d4 - Alice, 2025å¹´5æœˆ9æ—¥ 17:22 : ä¿®æ”¹æ¬¢è¿è¯­
* | f1e2d3c4 - Bob, 2025å¹´5æœˆ8æ—¥ 14:45 : ä¿®å¤æŒ‰é’®æ ·å¼
| * 2b3c4d5e - Carol, 2025å¹´5æœˆ7æ—¥ 12:30 : æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
|/
* 3a4b5c6d - Alice, 2025å¹´5æœˆ5æ—¥ 09:12 : åˆå§‹åŒ–é¡¹ç›®
```
![[Pro Git ä¸­æ–‡ç‰ˆ ç¬¬2ç‰ˆ 2.1.1.pdf#page=40&rect=44,285,570,629|Pro Git ä¸­æ–‡ç‰ˆ ç¬¬2ç‰ˆ 2.1.1, p.31]]
#### é™åˆ¶è¾“å‡ºé•¿åº¦
![[Pro Git ä¸­æ–‡ç‰ˆ ç¬¬2ç‰ˆ 2.1.1.pdf#page=42&rect=44,279,562,460|Pro Git ä¸­æ–‡ç‰ˆ ç¬¬2ç‰ˆ 2.1.1, p.38]]
âœ… **é™åˆ¶è¾“å‡ºæ¡æ•°**
```shell
# æŸ¥çœ‹æœ€è¿‘ 5 æ¬¡æäº¤
git log -2
```
âœ… **é™åˆ¶è¾“å‡ºæ—¶é—´**
* ğŸ•’ æ—¶é—´æ ¼å¼å‚è€ƒï¼š
	* ç»å¯¹æ—¶é—´ï¼šå¦‚ `2025-05-10`ã€`2025-05-10 14:00`
	* ç›¸å¯¹æ—¶é—´ï¼šå¦‚ `2 years 1 day 3 minutes ago`ã€`last monday`ã€`1 week ago`
```shell
# æŸ¥çœ‹æŒ‡å®šæ—¶é—´ä¹‹åçš„æäº¤ï¼ˆsince/after ç­‰ä»·ï¼‰
git log --since=2.weeks
git log --after="2025-05-01"

# æŸ¥çœ‹æŒ‡å®šæ—¶é—´ä¹‹å‰çš„æäº¤ï¼ˆuntil/before ç­‰ä»·ï¼‰
git log --until=2.weeks
git log --before="2025-05-01"
```
âœ… **æŒ‰ä½œè€…/æäº¤è€…ç­›é€‰**
```shell
# æŸ¥çœ‹ Alice æäº¤çš„è®°å½•
git log --author="Alice"

# æŸ¥çœ‹ç”± Carol æäº¤ï¼ˆå³ç”±å¥¹è¿è¡Œ git commitï¼‰çš„è®°å½•
git log --committer="Carol"
```
âœ… **æŒ‰æäº¤è¯´æ˜æ¨¡ç³Šç­›é€‰**
```shell
# æ˜¾ç¤ºæ‰€æœ‰åŒ…å«â€œæ¬¢è¿â€çš„æäº¤ä¿¡æ¯
git log --grep="æ¬¢è¿"
```
âœ… **å¤šæ¡ä»¶ç»„åˆç­›é€‰ï¼šä½¿ç”¨ `--all-match`ï¼ˆAND é€»è¾‘ï¼‰**
```shell
# æäº¤è€…æ˜¯ Alice ä¸”è¯´æ˜ä¸­åŒ…å«â€œæ¬¢è¿â€
git log --author="Alice" --grep="æ¬¢è¿" --all-match

# åŒæ—¶åŒ…å«å¤šä¸ªå…³é”®è¯ï¼ˆå¿…é¡»éƒ½å‘½ä¸­ï¼‰
git log --grep="æ¬¢è¿" --grep="ç™»å½•" --all-match
```
âœ… **ç²¾ç¡®è¿½è¸ªä»£ç å†…å®¹å˜åŠ¨ï¼šä½¿ç”¨ `-S`**
```shell
# æŸ¥æ‰¾æ·»åŠ æˆ–ç§»é™¤äº†å­—ç¬¦ä¸² "Welcome" çš„æäº¤
git log -S"Welcome"

# ç»“åˆ -p æŸ¥çœ‹ä¿®æ”¹ç»†èŠ‚
git log -S"Welcome" -p
```
### `git remote`ï¼šç®¡ç†è¿œç¨‹ä»“åº“
âœ… **åˆ—å‡ºè¿œç¨‹ä»“åº“ç®€å†™å**
```shell
$ git remote
origin
```
* `origin` æ˜¯é»˜è®¤çš„è¿œç¨‹ä»“åº“åç§°
âœ… **æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€ï¼ˆ-vï¼‰**
```shell
# æŸ¥çœ‹è¯¦ç»†çš„ URL ä¿¡æ¯
$ git remote -v
gk	    https://github.com/joeljhou/geekyspace.git (fetch)
gk	    https://github.com/joeljhou/geekyspace.git (push)
origin	git@github.com:joeljhou/geekyspace.git (fetch)
origin	git@github.com:joeljhou/geekyspace.git (push)
```
âœ… **æŸ¥çœ‹è¿œç¨‹ä»“åº“è¯¦æƒ…ï¼ˆshowï¼‰**
* è¯­æ³•ï¼š`git remote show [remotename]`
* æ˜¾ç¤ºè¿œç¨‹ä»“åº“çš„å®Œæ•´é…ç½®ä¿¡æ¯
	* `tracked`: æœ¬åœ°å·²æœ‰å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯å¼•ç”¨ï¼›
	* `new`: æ˜¯è¿œç¨‹æ–°å¢çš„åˆ†æ”¯ï¼Œå°šæœªåœ¨æœ¬åœ°å­˜åœ¨ï¼›
	* `stale`: è¿œç¨‹å·²åˆ é™¤ï¼Œæœ¬åœ°ä»ä¿ç•™ï¼Œå¯ç”¨ `git remote prune` æ¸…é™¤ã€‚
```shell
$ git remote show origin
* remote origin
  Fetch URL: git@github.com:joeljhou/geekyspace.git
  Push  URL: git@github.com:joeljhou/geekyspace.git
  HEAD branch: master
  Remote branches:
    master   tracked
    dev      new (next fetch will store in remotes/origin)
    old      stale (use 'git remote prune' to remove)
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (up to date)
```
âœ… **æ·»åŠ è¿œç¨‹ä»“åº“ï¼ˆaddï¼‰**
* è¯­æ³•ï¼š`git remote add <shortname> <url> `
```shell
git remote add gk https://github.com/joeljhou/geekyspace.git
```
æ·»åŠ åå¯åœ¨åç»­å‘½ä»¤ä¸­ä½¿ç”¨ç®€å†™å `gk` æ¥ä»£æ›¿å®Œæ•´ URLã€‚
âœ… **é‡å‘½åè¿œç¨‹ä»“åº“ï¼ˆrenameï¼‰**
```shell
git remote rename gk gkspace
```
âœ… **ç§»é™¤è¿œç¨‹ä»“åº“ï¼ˆrmï¼‰**
```shell
git remote rm gkspace
```
âœ… **åˆ—å‡ºè¿œç¨‹ä»“åº“å¼•ç”¨ï¼ˆls-remoteï¼‰**
```shell
# é»˜è®¤åˆ—å‡ºå½“å‰é¡¹ç›®è¿œç¨‹ä»“åº“ï¼ˆoriginï¼‰çš„æ‰€æœ‰å¼•ç”¨ï¼ˆHEADã€åˆ†æ”¯ã€æ ‡ç­¾ç­‰ï¼‰
$ git ls-remote
e1d89f88460e2cde9ed45f738dfc5b12fa742fdc	HEAD
e1d89f88460e2cde9ed45f738dfc5b12fa742fdc	refs/heads/master
8a7fe3c52cbf2aeb7e05830a1b2169cf4a0cfa41	refs/tags/v1.0.0
# æŒ‡å®šè¿œç¨‹ä»“åº“åï¼ˆå¦‚ originï¼‰åˆ—å‡ºå…¶æ‰€æœ‰å¼•ç”¨
$ git ls-remote origin
# ä»…æ˜¾ç¤ºè¿œç¨‹åˆ†æ”¯ï¼ˆrefs/heads/ï¼‰
$ git ls-remote --heads
# ä»…æ˜¾ç¤ºè¿œç¨‹æ ‡ç­¾ï¼ˆrefs/tags/ï¼‰
$ git ls-remote --tags
```
### `git restore`ï¼šæ¢å¤æ–‡ä»¶
```shell
# ===== git restoreï¼šæ¢å¤æ–‡ä»¶ =====
$ git restore file                      # æ¢å¤æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºï¼ˆæ’¤é”€å·¥ä½œåŒºçš„ä¿®æ”¹ï¼‰
$ git restore :/                        # æ’¤é”€å·¥ä½œåŒºæ‰€æœ‰ä¿®æ”¹

# åˆ†æ”¯/æäº¤ä¸­æ£€å‡ºæ–‡ä»¶ï¼ˆåˆ«åğŸ‘‰ ï¼šgit extractï¼‰
$ git restore --source <commit-or-branch> file
$ git extract HEAD~2 src/main.java      # ä¸¤æ¬¡æäº¤å‰çš„ç‰ˆæœ¬
$ git extract feature/login config.yml  # æŒ‡å®šåˆ†æ”¯

# å–æ¶ˆæš‚å­˜æ–‡ä»¶ï¼ˆåˆ«åğŸ‘‰ ï¼šgit unstageï¼‰
$ git restore --staged file
$ git unstage :/                        # å–æ¶ˆæš‚å­˜æ‰€æœ‰æ–‡ä»¶
$ git unstage app.py                    # å–æ¶ˆæš‚å­˜app.pyæ–‡ä»¶

# ä¸¢å¼ƒæ‰€æœ‰æ”¹åŠ¨
$ git restore --staged --worktree :/    # æ¢å¤åˆ°ä¸Šä¸€æ¬¡æäº¤
$ git restore -SW :/                    # ç®€å†™

# äº¤äº’å¼é€‰æ‹©æ¢å¤æŸäº›å†…å®¹ï¼ˆç²¾ç»†æ§åˆ¶ï¼‰
$ git restore -p
```
### `git fetch`ï¼šæŠ“å–
è¯­æ³•ï¼š`git fetch [remotename]`
```shell
$ git fetch origin    # ä»æŒ‡å®šè¿œç¨‹ä»“åº“æŠ“å–æœ€æ–°ä»£ç ï¼Œä½†ä¸è‡ªåŠ¨åˆå¹¶
$ git fetch           # ç®€å†™ï¼ˆè®¾ç½®ä¸Šæ¸¸åï¼‰
$ git fetch --all     # æŠ“å–æ‰€æœ‰è¿œç¨‹ä»“åº“çš„æ›´æ–°
$ git fetch --prune   # æ¸…ç†å·²è¢«è¿œç¨‹åˆ é™¤çš„æœ¬åœ°å¼•ç”¨
```
æ‰§è¡Œå‘½ä»¤åï¼Œä½ å°†ä¼šæ‹¥æœ‰è¿œç¨‹ä»“åº“ä¸­æ‰€æœ‰åˆ†æ”¯çš„å¼•ç”¨ï¼Œ**éœ€æ‰‹åŠ¨åˆå¹¶**ã€‚
### `git pull`ï¼šæ‹‰å–
è¯­æ³•ï¼š`git pull [remotename] [branch]`
```shell
A---B---C  (origin/main)
     \
      D---E  (æœ¬åœ°æäº¤)
# æ‹‰å–å¹¶åˆå¹¶ï¼ˆfetch + mergeï¼‰
$ git pull origin main
$ git pull
A---B---C---M  (åˆå¹¶æäº¤ M)
     \     /
      D---E
# æ‹‰å–å¹¶å˜åŸºï¼ˆfetch + rebaseï¼‰
$ git pull --rebase
A---B---C---D'---E'  (æœ¬åœ°æäº¤ D å’Œ E è¢«â€œé‡æ”¾â€ä¸º D' å’Œ E'ï¼Œå†å²çº¿æ€§)
```

### `git push`ï¼šæ¨é€
è¯­æ³•ï¼š`git push [remotename] [branch]`
```shell
$ git push origin serverfix
# æœ‰äº›å·¥ä½œè¢«ç®€åŒ–äº†ï¼Œç›¸å½“äºæ‰§è¡Œäº†
$ git push origin refs/heads/serverfix:refs/heads/serverfix
$ git push origin serverfix:serverfix
# å°†æœ¬åœ°çš„ serverfix åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸Šçš„ awesomebranch åˆ†æ”¯
$ git push origin serverfix:awesomebranch

# å¼ºåˆ¶æ¨é€è¦†ç›–
$ git push --force
# å…ˆæ£€æŸ¥è¿œç¨‹çŠ¶æ€æ˜¯å¦å˜æ›´ï¼Œæ¡ä»¶å…è®¸æ—¶è¦†ç›–
$ git push --force-with-lease
```
 âš ï¸ æ³¨æ„äº‹é¡¹ï¼š
 * ä½ å¿…é¡»å¯¹ç›®æ ‡è¿œç¨‹ä»“åº“æ‹¥æœ‰**å†™å…¥æƒé™**ï¼›
 * å¦‚æœè¿™æ˜¯è¯¥åˆ†æ”¯**é¦–æ¬¡æ¨é€**ï¼ŒGit ä¼šåœ¨è¿œç¨‹åˆ›å»ºå¯¹åº”åˆ†æ”¯ï¼›
 * å¦‚æœè¿œç¨‹å·²æœ‰æ›´æ–°ï¼Œè€Œä½ æœ¬åœ°æ²¡æœ‰åŒæ­¥ï¼Œæ¨é€ä¼šè¢«**æ‹’ç»**ï¼Œå¿…é¡»å…ˆæ‹‰å–å¹¶åˆå¹¶è¿œç¨‹çš„æœ€æ–°æ›´æ”¹ã€‚
âœ… **åˆ é™¤è¿œç¨‹åˆ†æ”¯**
* è¯­æ³•ï¼š`git push <remotename> --delete <branch>`
```shell
$ git push origin --delete feature/xxx
# ç­‰æ•ˆçš„è€å†™æ³•
$ git push origin :feature/xxx
```
### `git tag`ï¼šç®¡ç†æ ‡ç­¾
âœ… **åˆ—å‡ºæ ‡ç­¾**
* æ ‡ç­¾é»˜è®¤ä»¥**å­—æ¯é¡ºåº**åˆ—å‡ºï¼Œä½†é¡ºåºæ²¡æœ‰å®é™…æ„ä¹‰ã€‚
```shell
$ git tag 
v0.1
v1.3
```
âœ… **æ¨¡ç³ŠåŒ¹é…æ ‡ç­¾åï¼ˆ-lï¼‰**
```shell
$ git tag -l 'v1.8.5*'
v1.8.5
v1.8.5-rc0
v1.8.5.1
```
âœ… **æŸ¥çœ‹æ ‡ç­¾**
* è¯­æ³•ï¼š`git show <tag>`
```shell
# æ˜¾ç¤ºæ ‡ç­¾æŒ‡å‘çš„æäº¤è¯¦æƒ…
$ git show v1.0
```
âœ… **åˆ›å»ºæ ‡ç­¾ï¼ˆ-aï¼‰**
Git æ”¯æŒä¸¤ç§ç±»å‹çš„æ ‡ç­¾ï¼š
1. ğŸª¶ è½»é‡æ ‡ç­¾ï¼ˆ`lightweight`ï¼‰ï¼šä¸´æ—¶æ ‡è®°ï¼Œä¸å«å…ƒä¿¡æ¯ï¼Œä»…æŒ‡å‘æŸæ¬¡æäº¤ã€‚
	* è¯­æ³•ï¼š`git tag <tag>`
2. ğŸ“ **é™„æ³¨æ ‡ç­¾**ï¼ˆ`annotated`ï¼‰ï¼šç‹¬ç«‹å¯¹è±¡ï¼Œå«ä½œè€…ã€æ—¶é—´ã€è¯´æ˜ï¼Œå¯ç­¾åã€‚**æ¨è**ç”¨äºå‘å¸ƒç‰ˆæœ¬ã€‚
	* è¯­æ³•ï¼š`git tag -a <tag> -m "message"` 
* ğŸ•°ï¸ å†å²æäº¤æ‰“æ ‡ç­¾
	* è¯­æ³•ï¼š`git tag -a <tag> <commit-id> -m "message"`
```shell
# 1.è½»é‡æ ‡ç­¾
$ git tag v1.0-lw
# 2.é™„æ³¨æ ‡ç­¾
$ git tag -a v1.0 -m "å‘å¸ƒç‰ˆæœ¬ v1.0"
# 3.å†å²æäº¤æ‰“æ ‡ç­¾
$ git log --pretty=oneline. # æŸ¥æ‰¾å†å²æäº¤ ID
$ git tag -a v0.9 abc1234 -m "å‘å¸ƒ v0.9"
```
âœ… **å…±äº«ï¼ˆæ¨é€ï¼‰æ ‡ç­¾**
* `git push` ä¸ä¼šè‡ªåŠ¨æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“ã€‚ä½ éœ€è¦æ‰‹åŠ¨æ¨é€æ ‡ç­¾ã€‚
```shell
# æ¨é€å•ä¸ª/å¤šä¸ªæ ‡ç­¾
git push origin [tag]...
# æ¨é€æ‰€æœ‰æœ¬åœ°æ ‡ç­¾
git push origin --tags
```
âœ… **åˆ é™¤æ ‡ç­¾ï¼ˆ-dï¼‰**
* æœ¬åœ°æ ‡ç­¾è¯­æ³•ï¼š`git tag -d <tag>` 
*  è¿œç¨‹æ ‡ç­¾è¯­æ³•ï¼š`git push <remotename> :refs/tags/<tag>`
	* `:` å·¦ä¾§ä¸ºç©ºï¼Œè¡¨ç¤ºâ€œæ¨é€ç©ºå¼•ç”¨â€
	* `refs/tags/<tag>` æ˜¯è¿œç¨‹æ ‡ç­¾çš„å®Œæ•´å¼•ç”¨è·¯å¾„ï¼Œå¯ç®€å†™ä¸º`<tag>`ã€‚
```shell
# åˆ é™¤æœ¬åœ°æ ‡ç­¾
$ git tag -d v1.0
Deleted tag 'v1.0' (was abc1234)

# åˆ é™¤è¿œç¨‹æ ‡ç­¾
$ git push origin :v1.0
To origin
 - [deleted]         v1.0
```
âœ… **æ£€å‡ºæ ‡ç­¾**
* å³åœ¨ç‰¹å®šçš„æ ‡ç­¾ä¸Šåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯
* è¯­æ³•ï¼š`git checkout -b <new-branch> <tag>`
* æ–°ç‰ˆæœ¬æ¨èï¼š`git switch -c <new-branch> <tag>`
```shell
# åŸºäº v2.0.0 æ ‡ç­¾åˆ›å»ºä¸€ä¸ªå¯ç¼–è¾‘çš„æ–°åˆ†æ”¯"version2"
$ git checkout -b version2 v2.0.0
Switched to a new branch 'version2'
```
## å‘½ä»¤åˆ«åè®¾ç½®
```shell
# ç®€å†™åˆ«åè®¾ç½®
$ git config --global alias.co checkout
$ git config --global alias.br branch
$ git config --global alias.ci commit
$ git config --global alias.st status
# è‡ªå®šä¹‰å®ç”¨åˆ«å
$ git config --global alias.slog=log --oneline --decorate --graph --all
$ git config --global alias.unstage 'restore --staged'  # å–æ¶ˆæš‚å­˜æ–‡ä»¶
$ git config --global alias.extract 'restore --source'  # åˆ†æ”¯/æäº¤ä¸­æ£€å‡ºæ–‡ä»¶
$ git config --global alias.last 'log -1 HEAD'          # æŸ¥çœ‹æœ€åä¸€æ¬¡æäº¤
```
**è¿è¡Œå¤–éƒ¨å‘½ä»¤**
å¦‚æœä½ æƒ³è®©åˆ«åæ‰§è¡Œå¤–éƒ¨å‘½ä»¤è€Œä¸æ˜¯ Git å­å‘½ä»¤ï¼Œå¯åœ¨åˆ«åå‰åŠ  `!`ï¼š
```shell
# ç”¨æ³•ï¼šgit visual å¯åŠ¨ gitk å›¾å½¢ç•Œé¢
git config --global alias.visual '!gitk'
```
## Git åˆ†æ”¯
> Git çš„åˆ†æ”¯ç³»ç»Ÿæå…¶è½»é‡ï¼Œè¿™æ˜¯å®ƒçš„â€œ**å¿…æ€æŠ€**â€ã€‚åˆ†æ”¯çš„**åˆ›å»º**å’Œ**åˆå¹¶**æ˜¯ Git å·¥ä½œæµçš„æ ¸å¿ƒã€‚

ä¸€ä¸ªé¡¹ç›®æäº¤æ—¶ï¼ŒGit ä¼šå°†é¡¹ç›®ç»“æ„ä¿å­˜ä¸ºå¦‚ä¸‹å¯¹è±¡ï¼š
```shell
project/
â”œâ”€â”€ README.md  â†’ blob
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main.java â†’ blob
â””â”€â”€ LICENSE â†’ blob
```
- `blob`ï¼šä¿å­˜æ–‡ä»¶å†…å®¹ã€‚
- `tree`ï¼šä¿å­˜ç›®å½•ç»“æ„å’Œæ–‡ä»¶å¼•ç”¨ã€‚
- `commit`ï¼šä¿å­˜ä¸€æ¬¡æäº¤ï¼ŒåŒ…å«æŒ‡å‘ `tree` çš„æŒ‡é’ˆå’Œæäº¤ä¿¡æ¯ã€‚
- `branch`ï¼šä¸€ä¸ªæŒ‡å‘æŸä¸ª `commit` çš„å¯å˜æŒ‡é’ˆã€‚
Git åˆ†æ”¯æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘æœ€æ–°æäº¤çš„**å¯å˜æŒ‡é’ˆ**ï¼Œæ¯æ¬¡æäº¤éƒ½ä¼šè‡ªåŠ¨å‘å‰ç§»åŠ¨ã€‚
![[Pro Git ä¸­æ–‡ç‰ˆ ç¬¬2ç‰ˆ 2.1.1.pdf#page=58&rect=38,481,574,742|Pro Git ä¸­æ–‡ç‰ˆ ç¬¬2ç‰ˆ 2.1.1, p.51]]
### `git branch`ï¼šåˆ†æ”¯ç®¡ç†
âœ… **åˆ—å‡ºåˆ†æ”¯**
* è¯­æ³•ï¼š`git branch`
```shell
$ git branch             # åˆ—å‡ºæœ¬åœ°åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯å¸¦ *
$ git branch -r          # åˆ—å‡ºremoteåˆ†æ”¯
$ git branch -vv         # è¯¦ç»†è¾“å‡ºï¼Œæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„åŒæ­¥çŠ¶æ€åŠæœ€åæäº¤æƒ…å†µ
$ git branch --merged    # æŸ¥çœ‹å·²åˆå¹¶çš„åˆ†æ”¯ï¼ˆå¯è€ƒè™‘åˆ é™¤ï¼‰
$ git branch --no-merged # æŸ¥çœ‹æœªåˆå¹¶çš„åˆ†æ”¯ï¼ˆå¯è€ƒè™‘åˆå¹¶ï¼‰
```
ğŸ” **è®¾ç½®æˆ–ä¿®æ”¹ä¸Šæ¸¸åˆ†æ”¯ï¼ˆè¿œç¨‹è¿½è¸ªï¼‰**
```shell
$ git branch --set-upstream-to=origin/dev local-dev
# ç®€å†™
$ git branch -u origin/dev local-dev
```
è®¾ç½®åå¯ä»¥ä½¿ç”¨ `git pull` / `git push` ç›´æ¥ä¸è¿œç¨‹äº¤äº’ï¼Œæˆ–ç”¨ `@{u}` å¼•ç”¨ä¸Šæ¸¸åˆ†æ”¯ã€‚
âœ… **æ–°å»ºåˆ†æ”¯**
* è¯­æ³•ï¼š`git branch <branch>`
```shell
$ git branch hotfix      # åˆ›å»ºåä¸º hotfix çš„æ–°åˆ†æ”¯ï¼ˆä¸ä¼šåˆ‡æ¢ï¼‰
```
âœ… **æ–°å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ï¼ˆ-bï¼‰**
* è¯­æ³•ï¼š`git branch -b <branch>`
```shell
$ git checkout -b iss53  # ç­‰ä»·äº`git branch` + `git checkout`
Switched to a new branch "iss53"
# çœ‹åˆ°`HEAD`æŒ‡å‘äº†å½“å‰åˆ†æ”¯`iss53`
$ git slog  # ç­‰ä»·äº`git log --oneline --decorate --graph --all`
* f30ab (HEAD -> iss53) ä¿®å¤æ•°æ®å¤„ç†é€»è¾‘
* 34ac2 (main) å¢åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
| * ab28c (hotfix) ä¿®å¤çº¿ä¸Šbug [issue 53]
|/
* 98ca9 ç¬¬ä¸€æ¬¡ä»£ç æäº¤
* ed596 åˆå§‹åŒ–å·¥ç¨‹
```
âœ… **åˆ é™¤åˆ†æ”¯ï¼ˆ-d/-Dï¼‰**
* è¯­æ³•ï¼š`git branch -d <branch>`
```shell
# å®‰å…¨åˆ é™¤å·²åˆå¹¶çš„åˆ†æ”¯
$ git branch -d hotfix
# å¼ºåˆ¶åˆ é™¤ï¼ˆå³ä½¿æœªåˆå¹¶ï¼‰
$ git branch - testing
```
### `git checkout`ï¼šç‘å£«å†›åˆ€
git checkout å°±åƒä¸€ä¸ªå¤šåŠŸèƒ½ç‘å£«å†›åˆ€ï¼ŒåŠŸèƒ½å¼ºå¤§ä½†ä¸å¤Ÿä¸“ä¸€ã€‚
æ¶µç›–äº† **åˆ†æ”¯åˆ‡æ¢/åˆ›å»ºã€æ–‡ä»¶æ¢å¤/æ£€å‡ºã€è¿œç¨‹åˆ†æ”¯è·Ÿè¸ª** ç­‰å¤šç§åŠŸèƒ½ã€‚
> âš ï¸ ä» Git 2.23 ç‰ˆæœ¬èµ·ï¼Œå®˜æ–¹æ‹†åˆ†å‘½ä»¤ï¼š
> 	`git switch` ä¸“æ³¨äºåˆ†æ”¯åˆ‡æ¢
> 	`git restore` ä¸“æ³¨äºæ–‡ä»¶æ¢å¤  
> ä»¥æä¾›æ›´æ¸…æ™°çš„è¯­ä¹‰å’Œæ›´å®‰å…¨çš„æ“ä½œã€‚

âŒ **åˆ†æ”¯åˆ‡æ¢/åˆ›å»º**
```shell
# åˆ‡æ¢åˆ†æ”¯
$ git checkout <branch> 
# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯
$ git checkout -b <branch>
```
âŒ **æ–‡ä»¶æ¢å¤**
```shell
$ git checkout -- README.md    # æ¢å¤æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºï¼ˆæ’¤é”€å·¥ä½œåŒºçš„ä¿®æ”¹ï¼‰
$ git checkout -- .            # æ’¤é”€å·¥ä½œåŒºæ‰€æœ‰ä¿®æ”¹

# åˆ†æ”¯/æäº¤ä¸­æ£€å‡ºæ–‡ä»¶
$ git checkout <commit-or-branch> -- <file>
$ git checkout HEAD~1 -- src/main.py
$ git checkout feature/login -- config.yaml
```
ğŸŒ **è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ï¼ˆ--trackï¼‰**
* è¯­æ³•ï¼š`git checkout -b [branch] [remotename]/[branch]`
```shell
# åŸºäºè¿œç¨‹åˆ†æ”¯åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼Œè‡ªåŠ¨è·Ÿè¸ª
$ git checkout -b dev origin/dev
# ç­‰ä»·ç®€å†™
$ git checkout --track origin/dev

# æœ¬åœ°åˆ†æ”¯åä¸è¿œç¨‹åˆ†æ”¯åä¸åŒï¼Œéœ€æ‰‹åŠ¨æŒ‡å®šè·Ÿè¸ªä¸Šæ¸¸
$ git checkout -b local-dev origin/dev
$ git branch --set-upstream-to=origin/dev local-dev
```
### `git switch`ï¼šåˆ†æ”¯åˆ‡æ¢
è¯­æ³•ï¼š`git switch <branch>`
```shell
# åˆ‡æ¢åˆ†æ”¯
git checkout testing
# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯
git switch -c <branch>
# åŸºäºè¿œç¨‹åˆ†æ”¯åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼Œè‡ªåŠ¨è·Ÿè¸ª
git switch --track origin/dev
```
è¿™æ · `HEAD` å°±æŒ‡å‘ testing åˆ†æ”¯äº†ã€‚
### `git merge`ï¼šåˆå¹¶
è¯­æ³•ï¼š`git merge <branch>`
åˆå¹¶çš„ä¸‰ç§å¸¸è§åœºæ™¯ï¼š
1. **å¿«è¿›åˆå¹¶ï¼ˆFast-forward Mergeï¼‰**
	* å½“å‰åˆ†æ”¯ï¼ˆ `main`ï¼‰æ²¡æœ‰ä»»ä½•æ–°çš„æäº¤ï¼Œå®Œå…¨è½åäºç›®æ ‡åˆ†æ”¯ï¼ˆ `feature`ï¼‰ã€‚
	* æœ¬è´¨æ˜¯ç›´æ¥æŠŠæŒ‡é’ˆâ€œ**å¿«è¿›**ï¼ˆfast-forwardï¼‰â€åˆ°ç›®æ ‡åˆ†æ”¯ã€‚
	```shell
	# ğŸ“ˆ åˆå¹¶å‰
	A---B---C (feature)
         \
          main (æŒ‡é’ˆå¿«è¿›åˆ° C)
    
    # ğŸ“ˆ åˆå¹¶å
    A---B---C (main, feature)
	```
 2. **ä¸‰æ–¹åˆå¹¶ï¼ˆThree-way Mergeï¼‰**
	 * å½“å‰åˆ†æ”¯ï¼ˆ `main`ï¼‰å’Œè¦åˆå¹¶åˆ†æ”¯ ï¼ˆ`feature`ï¼‰å„è‡ªæœ‰æ–°çš„æäº¤ï¼Œåˆ†æ”¯ç‚¹ä¹‹åæœ‰åˆ†å‰ã€‚
	 * Git ä¼šä»¥**å…±åŒç¥–å…ˆèŠ‚ç‚¹**ã€ä¸¤ä¸ªåˆ†æ”¯å„è‡ªæœ«ç«¯å¿«ç…§ä¸ºä¾æ®ï¼Œ**ç”Ÿæˆä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤**ã€‚
	 ```shell
	# ğŸ“ˆ åˆå¹¶å‰
	      D---E (feature)
	     /
	A---B---C (main)
	
	# ğŸ“ˆ åˆå¹¶å
		  D---E (feature)
	     /     \
	A---B---C---M (main)
	```
 3. **å†²çªåˆå¹¶ï¼ˆMerge Conflictï¼‰**
	 * å½“ä¸‰æ–¹åˆå¹¶ä¸­ä¸¤ä¸ªåˆ†æ”¯**ä¿®æ”¹äº†åŒä¸€æ–‡ä»¶çš„åŒä¸€ä½ç½®**ï¼ŒGit æ— æ³•è‡ªåŠ¨åˆå¹¶ï¼Œå‘ç”Ÿå†²çªã€‚
	 * åˆå¹¶æ“ä½œä¼šä¸­æ­¢ï¼Œéœ€è¦æ‰‹åŠ¨ä»‹å…¥è§£å†³å†²çªã€‚
ğŸ“„ å†²çªåˆå¹¶ç¤ºæ„ï¼ˆindex.htmlï¼‰ï¼š
```shell
$ git switch main
$ git merge feature
Auto-merging index.html
CONFLICT (content): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.
# æŸ¥çœ‹å†²çªæ–‡ä»¶
$ cat index.html
<<<<<<< HEAD
<div id="footer">contact : email.support@github.com</div>
=======
<div id="footer">
 please contact us at support@github.com
</div>
>>>>>>> feature
```
æ‰‹åŠ¨ç¼–è¾‘å†²çªæ–‡ä»¶ï¼Œæ¸…é™¤å†²çªæ ‡è®° `<<<<<<<` `=======` `>>>>>>>`ã€‚ 
### `git rebase`ï¼šå˜åŸº
è¯­æ³•ï¼š`git rebase <branch>` 
* æŠŠ**å½“å‰æ‰€åœ¨åˆ†æ”¯**çš„æäº¤â€œæ¬ç§»â€åˆ° `<branch>` åˆ†æ”¯çš„æœ€æ–°æäº¤ä¹‹åã€‚
**å˜åŸºçš„åŸºæœ¬æ“ä½œ**ã€€
```shell
# å˜åŸºå‰
master:     A---B---C
                 \
experiment:        D---E

# æ‰§è¡Œå‘½ä»¤
# å°† `experiment` åˆ†æ”¯çš„æäº¤æ¥åˆ° `master` æœ€æ–°æäº¤ä¹‹å
$ git switch experiment
$ git rebase master

# å˜åŸºå
master:     A---B---C
                      \
experiment:             D'---E'

# å›åˆ° master åˆ†æ”¯ï¼Œè¿›è¡Œä¸€æ¬¡â€œå¿«è¿›åˆå¹¶â€
$ git checkout master
$ git merge experiment

# æœ€ç»ˆç»“æ„
master:     A---B---C---D'---E'
                             â†‘
experiment:                  |
```
å°† `experiment` åˆ†æ”¯çš„æäº¤ç§»åŠ¨åˆ° `master` çš„æœ€æ–°æäº¤ä¹‹åã€‚
**æ›´æœ‰è¶£çš„å˜åŸºä¾‹å­**
è¯­æ³•ï¼š`git rebase --onto <newbase/æ–°å®¶> <upstream/è¦å‰ªè°> <branch/è¦æ¬è°>`
```shell
# å˜åŸºå‰
A---B---C---D           (master)
         \
          E---F---G     (server)
               \
                H---I   (client)

# æ‰§è¡Œå‘½ä»¤
# å°†clientåˆ†æ”¯ä¸Šï¼Œç›¸å¯¹äº server çš„æäº¤ï¼ˆH, Iï¼‰ç§»åˆ° master åˆ†æ”¯åé¢ï¼ŒåŒæ—¶ä¸¢å¼ƒ server åˆ†æ”¯çš„ä¸Šä¸‹æ–‡ã€‚
$ git rebase --onto master server client
# ç­‰åŒäºï¼š
git checkout client
git rebase --onto master server

# å˜åŸºå
A---B---C---D---H'---I'   (master->D, client)
         \
          E---F---G       (server)


# å›åˆ° master åˆ†æ”¯ï¼Œè¿›è¡Œä¸€æ¬¡â€œå¿«è¿›åˆå¹¶â€
$ git switch master
$ git merge client

# æœ€ç»ˆç»“æ„
           â€‹\
          E---F---G       (server)
```
## æœåŠ¡å™¨ä¸Šçš„ Git
### åè®®
Gitæ”¯æŒå››ç§ä¸»è¦åè®®ç”¨äºæ•°æ®ä¼ è¾“ï¼š**æœ¬åœ°åè®®**ã€**HTTPåè®®**ï¼ˆæ™ºèƒ½/å“‘ï¼‰ã€**SSHåè®®**å’Œ**Gitåè®®**ã€‚
âœ… **æœ¬åœ°åè®®ï¼ˆLocal protocolï¼‰**
è¿œç¨‹ç‰ˆæœ¬åº“å°±æ˜¯ç¡¬ç›˜å†…çš„å¦ä¸€ä¸ªç›®å½•ã€‚
å…‹éš†ä¸€ä¸ªæœ¬åœ°ç‰ˆæœ¬åº“ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼š
```shell
# æœ¬åœ°è·¯å¾„ï¼Œä½¿ç”¨ç¡¬é“¾æ¥ï¼ˆhard linksï¼‰æ–¹å¼åŠ å¿«å…‹éš†é€Ÿåº¦
$ git clone /opt/git/project.git

# file:// è®¤ä¸ºæ˜¯ä¸€ä¸ªç½‘ç»œURLï¼Œä½¿ç”¨HTTPä¸€æ ·çš„"å“‘åè®®â€æ–¹å¼
$ git clone file:///opt/git/project.git
```
**ğŸ‘ ä¼˜ç‚¹ï¼š**
* å›¢é˜Ÿå·²ç»æœ‰å…±äº«æ–‡ä»¶ç³»ç»Ÿï¼Œå»ºç«‹ç‰ˆæœ¬åº“ä¼šååˆ†å®¹æ˜“ã€‚
**ğŸ‘ ç¼ºç‚¹ï¼š**
* å…±äº«æ–‡ä»¶ç³»ç»Ÿæ¯”è¾ƒéš¾é…ç½®ï¼Œä¸æ–¹ä¾¿ä»å¤šä¸ªä½ç½®è®¿é—®ã€‚
* é€šè¿‡ NFS è®¿é—®ç‰ˆæœ¬åº“è¦æ¯”é€šè¿‡ SSH è®¿é—®æ…¢ã€‚
* è¿™ä¸ªåè®®å¹¶ä¸ä¿æŠ¤ä»“åº“é¿å…æ„å¤–çš„æŸåã€‚
âœ…  **HTTP åè®®**
Git æ”¯æŒä¸¤ç§ HTTP åè®®ï¼š**å“‘ï¼ˆDumbï¼‰HTTP** å’Œ **æ™ºèƒ½ï¼ˆSmartï¼‰HTTP**ï¼Œå…¶ä¸­æ™ºèƒ½ HTTPåœ¨ Git 1.6.6 ä¹‹åæˆä¸ºä¸»æµã€‚
**æ™ºèƒ½ï¼ˆSmartï¼‰ HTTP åè®®**
* æœ€æµè¡Œçš„ä½¿ç”¨ Git çš„æ–¹å¼
* å³æ”¯æŒåƒ`git://`åè®®ä¸€æ ·è®¾ç½®åŒ¿åæœåŠ¡ï¼Œä¹Ÿå¯ä»¥åƒ`SSH`åè®®ä¸€æ ·æä¾›ä¼ è¾“æ—¶çš„æˆæƒå’ŒåŠ å¯†ã€‚
**å“‘ï¼ˆDumbï¼‰ HTTP åè®®**
* å“‘ HTTP åè®®é‡Œ web æœåŠ¡å™¨ä»…æŠŠè£¸ç‰ˆæœ¬åº“å½“ä½œæ™®é€šæ–‡ä»¶æ¥å¯¹å¾…ï¼Œæä¾›æ–‡ä»¶æœåŠ¡ã€‚
* ä»…æ”¯æŒåªè¯»æ“ä½œï¼ˆå…‹éš†ã€æ‹‰å–ï¼‰ï¼Œé€‚åˆè½»é‡åªè¯»å‘å¸ƒã€‚
**ğŸ‘ ä¼˜ç‚¹ï¼š**ï¼ˆåªå…³æ³¨æ™ºèƒ½ HTTP åè®®ï¼‰
* è®¿é—®åªéœ€è¦ä¸€ä¸ªURLï¼Œç»ˆç«¯ç”¨æˆ·æ“ä½œç®€å•
* ç›¸æ¯” SSH åè®®ï¼Œå¯ä»¥ä½¿ç”¨ç”¨æˆ·å/å¯†ç æˆæƒï¼Œæ— éœ€è®¾ç½® SSH å¯†é’¥ã€‚Â 
* å¯¹éèµ„æ·±çš„ä½¿ç”¨è€…ï¼ŒHTTP åè®®çš„å¯ç”¨æ€§æ˜¯ä¸»è¦çš„ä¼˜åŠ¿ã€‚
**ğŸ‘ ç¼ºç‚¹ï¼š**
* åœ¨ HTTP ä¸Šä½¿ç”¨éœ€æˆæƒçš„æ¨é€ï¼Œç®¡ç†å‡­è¯éº»çƒ¦ã€‚
âœ…  **SSH åè®®**
SSH åè®®ä¹Ÿæ˜¯ä¸€ä¸ªéªŒè¯æˆæƒçš„ç½‘ç»œåè®®ï¼›å¹¶ä¸”ï¼Œå› ä¸ºå…¶æ™®éæ€§ï¼Œæ¶è®¾å’Œä½¿ç”¨éƒ½å¾ˆå®¹æ˜“ã€‚
é€šè¿‡ SSH åè®®å…‹éš†ç‰ˆæœ¬åº“ï¼š
```shell
# æŒ‡å®šä¸€ä¸ªÂ `ssh://`Â çš„ URLï¼š
$ git clone ssh://user@server/project.git
# scp å¼çš„å†™æ³•ï¼š
$ git clone user@server:project.git
```
**ğŸ‘ ä¼˜ç‚¹ï¼š**
* SSH æ¶è®¾ç›¸å¯¹ç®€å•ï¼Œéƒ¨ç½²å’Œç®¡ç†é—¨æ§›ä½ã€‚
* å®‰å…¨æ€§é«˜ï¼Œæ‰€æœ‰ä¼ è¾“æ•°æ®éƒ½è¦ç»è¿‡æˆæƒå’ŒåŠ å¯†ã€‚
* ä¼ è¾“æ•ˆç‡é«˜ã€‚
ğŸ‘ ç¼ºç‚¹ï¼š
* ä¸æ”¯æŒåŒ¿åè®¿é—®ã€‚
âœ…  **Git åè®®**
Git åè®®æ˜¯ä¸€ç§ä¸“ä¸º Git è®¾è®¡çš„é«˜æ•ˆåªè¯»åè®®ï¼š
* ç›‘å¬é»˜è®¤ç«¯å£ `9418`ã€‚
* ä½¿ç”¨æ—¶éœ€åœ¨è£¸ä»“åº“æ ¹ç›®å½•åˆ›å»º `git-daemon-export-ok` æ–‡ä»¶ï¼Œè¡¨ç¤ºå…è®¸é€šè¿‡ Git åè®®è®¿é—®ã€‚
* ä¸æ”¯æŒæˆæƒæœºåˆ¶ï¼Œå› æ­¤æ— æ³•é€šè¿‡ Git åè®®æ¨é€ã€‚
**ğŸ‘ ä¼˜ç‚¹ï¼š**
* ç½‘ç»œä¼ è¾“åè®®é‡Œæœ€å¿«çš„ã€‚
ğŸ‘ ç¼ºç‚¹ï¼š
* ç¼ºä¹æˆæƒæœºåˆ¶ï¼Œä¸é€‚åˆä½œä¸ºè®¿é—®é¡¹ç›®ç‰ˆæœ¬åº“çš„å”¯ä¸€æ‰‹æ®µã€‚ 
* éƒ¨ç½²å¤æ‚ï¼Œéœ€è¦é…ç½® `git-daemon` å®ˆæŠ¤è¿›ç¨‹ï¼Œé€šå¸¸è¿˜éœ€é…åˆ `xinetd` æˆ–ç±»ä¼¼æœåŠ¡ç®¡ç†å·¥å…·ã€‚
* éœ€å¼€æ”¾é˜²ç«å¢™ç«¯å£ `9418`ã€‚
### åœ¨æœåŠ¡å™¨ä¸Šæ­å»º Gitï¼ˆç•¥ï¼‰
###  ç”Ÿæˆ SSH å…¬é’¥
> å…³äºåœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸­ç”Ÿæˆ SSH å¯†é’¥çš„æ›´æ·±å…¥æ•™ç¨‹ï¼Œè¯·å‚é˜… GitHub çš„ SSH å¯†é’¥æŒ‡å—Â [https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)ã€‚
```shell
ssh-keygen -t ed25519 -C "your_email@example.com"
```
å‚è€ƒæ–‡æ¡£ï¼š
* [ç®€å•é…ç½®å®ç°å¤šä¸ªGitHubå’ŒGiteeè´¦å·çš„SSHç®¡ç†](https://blog.csdn.net/qq_40174960/article/details/131298464)
### é…ç½®æœåŠ¡å™¨...
### Git å®ˆæŠ¤è¿›ç¨‹...
### Smart HTTP...
### GitWeb
å¦‚æœä½ å¯¹é¡¹ç›®æœ‰è¯»å†™æƒé™æˆ–åªè¯»æƒé™ï¼Œä½ å¯èƒ½éœ€è¦å»ºç«‹èµ·ä¸€ä¸ªåŸºäºç½‘é¡µçš„ç®€æ˜“æŸ¥çœ‹å™¨ã€‚ Git æä¾›äº†ä¸€ä¸ªå«åš GitWeb çš„ CGI è„šæœ¬æ¥åšè¿™é¡¹å·¥ä½œã€‚
![GitWeb çš„ç½‘é¡µç”¨æˆ·ç•Œé¢](http://img.geekyspace.cn/pictures/2025/20250528012638682.png)
### GitLabï¼ˆæç‹ï¼‰
æ›´ç°ä»£ï¼ŒåŠŸèƒ½æ›´å…¨çš„ Git å¼€æºæœåŠ¡å™¨ã€‚
[æç‹GitLab Dockeréƒ¨ç½²](https://gitlab.cn/docs/jh/install/docker.html)
```shell
# è®¾ç½®ç¯å¢ƒå˜é‡
export GITLAB_HOME=$HOME/docker-data-volumes/gitlab/
# å®¿ä¸»æœºæ°¸ä¹…è®¾ç½®
echo 'export GITLAB_HOME=$HOME/docker-data-volumes/gitlab/' >> ~/.zshrc
source ~/.zshrc

# åˆ›å»ºæŒ‚è½½ç›®å½•
mkdir -p $GITLAB_HOME/{config,logs,data}

# è¿è¡Œæç‹ GitLabï¼Œå¯ç”¨ amd64 æ¨¡æ‹Ÿ
sudo docker run --detach \
  --platform linux/amd64 \
  --hostname gitlab.local \
  --publish 80:80 --publish 8443:443 --publish 2222:22 \
  --name gitlab-jh \
  --restart unless-stopped \
  --volume $GITLAB_HOME/config:/etc/gitlab \
  --volume $GITLAB_HOME/logs:/var/log/gitlab \
  --volume $GITLAB_HOME/data:/var/opt/gitlab \
  --shm-size 1024m \
  registry.gitlab.cn/omnibus/gitlab-jh:latest
```
é¦–æ¬¡ç™»å½•ä½¿ç”¨ç”¨æˆ·å`root`ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹å¼è·å–å¯†ç ã€‚
```shell
# Linuxå®‰è£…åŒ…æ–¹å¼
sudo cat /etc/gitlab/initial_root_password
# Dockerå®‰è£…æ–¹å¼
sudo docker exec -it gitlab-jh grep 'Password:' /etc/gitlab/initial_root_password
```
æ–¹ä¾¿å­¦ä¹ ä½¿ç”¨çš„å°è®¾ç½®ï¼š
* [ä¿®æ”¹å¯†ç ](https://support.huaweicloud.com/bestpractice-ecs/zh-cn_topic_0142594569.html)
	```shell
	jh@2025!
	```
* [åå¥½è®¾ç½®-æœ¬åœ°åŒ–ä¸­è®¾ç½®ä¸­æ–‡](https://jihulab.com/gitlab-cn/gitlab/-/issues/3685)
* æ–°å¢`host`æ–‡ä»¶é…ç½®ï¼š`127.0.0.1 gitlab.local`
* ç›´æ¥æ˜ å°„ç«¯å£å·`80`ï¼Œä»¥ä¾¿ç›´æ¥é€šè¿‡åŸŸå`gitlab.local`è®¿é—®
å‚è€ƒæ–‡æ¡£ï¼š
* [é˜¿é‡Œäº‘å®˜æ–¹æ–‡æ¡£-éƒ¨ç½²GitLabä»£ç æ‰˜ç®¡å¹³å°](https://help.aliyun.com/zh/ecs/use-cases/deploy-and-use-gitlab)
* [Gitlabç®¡ç†ç”¨æˆ·ã€ç»„ã€æƒé™(ä¸€)](https://www.cnblogs.com/zangxueyuan/p/9222014.html)
## Github
### è´¦æˆ·çš„åˆ›å»ºå’Œé…ç½®
* [å®˜ç½‘](https://github.com/)
* [æ³¨å†Œ](https://github.com/signup)
* SSH è®¿é—®
	* [ç®€å•é…ç½®å®ç°å¤šä¸ªGitHubå’ŒGiteeè´¦å·çš„SSHç®¡ç†](https://blog.csdn.net/qq_40174960/article/details/131298464)
* [è®¾ç½®é‚®ç®±](https://github.com/settings/emails)
* [åŒå› ç´ èº«ä»½éªŒè¯-2FA](https://github.com/settings/security)
### å¯¹é¡¹ç›®åšå‡ºè´¡çŒ®
* æ´¾ç”Ÿï¼ˆForkï¼‰é¡¹ç›®
